{% extends "base.html" %}

{% block title %}Decode Share Code{% endblock %}

{% block content %}
<h1 class="mb-3" style="font-size: 2rem;">
    <i class="fas fa-code" style="color: var(--accent-primary);"></i>
    Decode Share Code
</h1>

<div class="grid-2">
    <!-- Decoder Form -->
    <div class="card">
        <div class="card-header">
            <h2 class="card-title"><i class="fas fa-key"></i> Enter Share Code</h2>
        </div>

        <form action="{{ url_for('decode') }}" method="POST">
            <div class="form-group">
                <label class="form-label">CS2 Share Code</label>
                <input
                    type="text"
                    name="share_code"
                    class="form-input"
                    placeholder="CSGO-xxxxx-xxxxx-xxxxx-xxxxx-xxxxx"
                    value="{{ share_code }}"
                    style="font-family: 'JetBrains Mono', monospace;"
                    required
                >
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%;">
                <i class="fas fa-unlock"></i> Decode
            </button>
        </form>

        {% if error %}
        <div class="alert alert-error mt-4">
            <i class="fas fa-exclamation-triangle"></i>
            {{ error }}
        </div>
        {% endif %}
    </div>

    <!-- Result -->
    <div class="card">
        <div class="card-header">
            <h2 class="card-title"><i class="fas fa-info-circle"></i> Decoded Information</h2>
        </div>

        {% if result %}
        <div style="font-family: 'JetBrains Mono', monospace;">
            <div class="form-group">
                <label class="form-label">Match ID</label>
                <div class="form-input" style="background: var(--bg-primary); user-select: all;">
                    {{ result.match_id }}
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Outcome ID</label>
                <div class="form-input" style="background: var(--bg-primary); user-select: all;">
                    {{ result.outcome_id }}
                </div>
            </div>

            <div class="form-group mb-0">
                <label class="form-label">Token</label>
                <div class="form-input" style="background: var(--bg-primary); user-select: all;">
                    {{ result.token }}
                </div>
            </div>
        </div>

        <div class="alert alert-success mt-4">
            <i class="fas fa-check-circle"></i>
            Share code decoded successfully!
        </div>
        {% else %}
        <div style="text-align: center; padding: 3rem; color: var(--text-muted);">
            <i class="fas fa-arrow-left" style="font-size: 2rem; margin-bottom: 1rem;"></i>
            <p>Enter a share code to see decoded information</p>
        </div>
        {% endif %}
    </div>
</div>

<!-- Info -->
<div class="card mt-4">
    <div class="card-header">
        <h2 class="card-title"><i class="fas fa-question-circle"></i> What is a Share Code?</h2>
    </div>
    <p class="text-muted">
        CS2 share codes are unique identifiers for matches. They look like
        <code style="background: var(--bg-tertiary); padding: 2px 8px; border-radius: 4px; font-family: 'JetBrains Mono', monospace;">
            CSGO-xxxxx-xxxxx-xxxxx-xxxxx-xxxxx
        </code>
        and contain encoded information about the match including:
    </p>
    <ul style="color: var(--text-secondary); margin-top: 1rem; padding-left: 1.5rem;">
        <li><strong>Match ID</strong> - Unique identifier for the match</li>
        <li><strong>Outcome ID</strong> - Information about the match result</li>
        <li><strong>Token</strong> - Authentication token for downloading</li>
    </ul>
</div>
{% endblock %}
